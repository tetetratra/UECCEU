<% breadcrumb :year %>
<%= breadcrumbs pretext: "", separator: " ＞ " %>

<h1><%= @year %>年度の授業一覧</h1>

<%= render 'courses/index_base' %>

<%
=begin
%>

<form class="form-inline mt-2 mt-md-0" id="search_form" action='<%="/#{@year}/search"%>'>
  <div class="input-group-prepend">
    <span class="input-group-text">全文検索</span>
  </div>
  <input name='query' value="" class="form-control mr-sm-2" type="text" placeholder="単語検索" aria-label="Search">
  <button class="btn btn-outline-success my-2 my-sm-0" id="search_form" type="submit">Search</button>
</form>

<br>

<table id="tablesorter" class="table table_index table-sm tablesorter">
  <thead class="thead-light">
    <tr class='header_row'>
      <th scope="row" class="row_tiny">💬</th>
      <th scope="row">授業科目名</th>
      <th scope="row">英文授業科目名</th>
      <th scope="row" class="row_small">科目番号</th>
      <th scope="row" class="row_small">開講年次</th>
      <th scope="row" class="row_small">開講学期</th>
      <th scope="row">開講コース・課程</th>
      <th scope="row" class="row_small">単位数</th>
      <th scope="row">科目区分</th>
      <th scope="row">開講学科・専攻</th>
      <th scope="row">担当教員名</th>
      <th scope="row">授業関連Webページ</th>
    </tr>
    <tr class='header_row'>
      <th scope="row" class="row_tiny">
      </th>
      <th scope="row">
        <form class='search_form course_title_japanese'>
          <input class="form-control" type="text" placeholder="正規|表現|検索">
        </form>
      </th>
      <th scope="row">
        <form class='search_form course_title_english'>
          <input class="form-control" type="text" placeholder="">
        </form>
      </th>
      <th scope="row" class="row_small">
        <form class='search_form code'>
          <input class="form-control" type="text" placeholder="">
        </form>
      </th>
      <th scope="row" class="row_small">
        <form class='search_form year_offerd'>
          <input class="form-control" type="text" placeholder="">
        </form>
      </th>
      <th scope="row" class="row_small">
        <form class='search_form semester_offerd'>
          <input class="form-control" type="text" placeholder="">
        </form>
      </th>
      <th scope="row">
        <form class='search_form faculty_offering_the_course'>
          <input class="form-control" type="text" placeholder="">
        </form>
      </th>
      <th scope="row" class="row_small">
        <form class='search_form credits'>
          <input class="form-control" type="text" placeholder="">
        </form>
      </th>
      <th scope="row">
        <form class='search_form category'>
          <input class="form-control" type="text" placeholder="">
        </form>
      </th>
      <th scope="row">
        <form class='search_form cluster_and_department'>
          <input class="form-control" type="text" placeholder="">
        </form>
      </th>
      <th scope="row">
        <form class='search_form lecturer'>
          <input class="form-control" type="text" placeholder="">
        </form>
      </th>
      <th scope="row">
        <form class='search_form course_website'>
          <input class="form-control" type="text" placeholder="">
        </form>
      </th>
    </tr>
    <% @courses.each_with_index do |c, i| %>
      <tr>
        <td class='comment_count'><%= c.comments.size %></td>
        <td class='course_title_japanese'><%= link_to(c.course_title_japanese, "/#{@year}/#{c.url_name}/#{c.inner_index}") %></td>
        <td class='course_title_english'><%= c.course_title_english %></td>
        <td class='code'><%= c.code %></td>
        <td class='year_offerd'><%= c.year_offerd %></td>
        <td class='semester_offerd'><%= c.semester_offerd %></td>
        <td class='faculty_offering_the_course'><%= c.faculty_offering_the_course %></td>
        <td class='credits'><%= c.credits %></td>
        <td class='category'><%= c.category %></td>
        <td class='cluster_and_department'><%= c.cluster_and_department %></td>
        <td class='lecturer'><%= c.lecturer %></td>
        <td class='course_website' style="word-wrap:break-word;">
          <% if (url = URI.extract(c.course_website).join("\n")).empty? %>
            <%= c.course_website %>
          <% else %>
            <%= link_to c.course_website, URI.extract(c.course_website).first %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </thead>
</table>



<%
=end
%>



